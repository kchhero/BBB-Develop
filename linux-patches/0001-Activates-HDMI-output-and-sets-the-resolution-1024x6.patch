From 607d0803a2ee31bc59223f894b567ff037ee0834 Mon Sep 17 00:00:00 2001
From: kchhero <kchhero@gmail.com>
Date: Wed, 13 Aug 2025 20:27:02 +0900
Subject: [PATCH] Activates HDMI output and sets the resolution (1024x600) and
 timing of the 7-inch LCD.

---
 arch/arm/boot/dts/BB-WAVESHARE-7C-00A0.dtso | 65 +++++++++++++++++++++
 arch/arm/boot/dts/Makefile                  |  1 +
 2 files changed, 66 insertions(+)
 create mode 100644 arch/arm/boot/dts/BB-WAVESHARE-7C-00A0.dtso

diff --git a/arch/arm/boot/dts/BB-WAVESHARE-7C-00A0.dtso b/arch/arm/boot/dts/BB-WAVESHARE-7C-00A0.dtso
new file mode 100644
index 000000000000..673dc0a0e70e
--- /dev/null
+++ b/arch/arm/boot/dts/BB-WAVESHARE-7C-00A0.dtso
@@ -0,0 +1,65 @@
+// meta-sukerbeaglebone/recipes-kernel/linux/files/BB-WAVESHARE-7C-00A0.dts
+
+/dts-v1/;
+/plugin/;
+
+/ {
+    compatible = "ti,beaglebone", "ti,beaglebone-black";
+    part-number = "BB-WAVESHARE-7C";
+    version = "00A0";
+
+    fragment@0 {
+        target-path = "/";
+        __overlay__ {
+            aliases {
+                display0 = "/ocp/display";
+            };
+        };
+    };
+    
+    fragment@1 {
+        target-path="/ocp";
+        __overlay__ {
+            display: display {
+                compatible = "simple-panel-dsi";
+                #address-cells = <1>;
+                #size-cells = <0>;
+                
+                port {
+                    display_in: endpoint {
+                        remote-endpoint = <&hdmi_out>;
+                    };
+                };
+                
+                panel-timing {
+                    clock-frequency = <51200000>;
+                    hactive = <1024>;
+                    vactive = <600>;
+                    hfront-porch = <160>;
+                    hback-porch = <140>;
+                    hsync-len = <20>;
+                    vfront-porch = <22>;
+                    vback-porch = <21>;
+                    vsync-len = <12>;
+                    hsync-active = <0>;
+                    vsync-active = <0>;
+                    de-active = <1>;
+                    pixelclk-active = <1>;
+                };
+            };
+        };
+    };
+    
+    fragment@2 {
+        target = <&hdmi>;
+        __overlay__ {
+            status = "okay";
+            
+            port {
+                hdmi_out: endpoint {
+                    remote-endpoint = <&display_in>;
+                };
+            };
+        };
+    };
+};
diff --git a/arch/arm/boot/dts/Makefile b/arch/arm/boot/dts/Makefile
index ff331aaf7607..61726758add4 100644
--- a/arch/arm/boot/dts/Makefile
+++ b/arch/arm/boot/dts/Makefile
@@ -938,6 +938,7 @@ dtb-$(CONFIG_SOC_AM33XX) += \
 	am335x-bone.dtb \
 	am335x-boneblack.dtb \
 	am335x-boneblack-uboot.dtb \
+	BB-WAVESHARE-7C-00A0.dtbo \
 	PB-MIKROBUS-1.dtbo \
 	PB-MIKROBUS-0.dtbo \
 	M-BB-BBGG-00A0.dtbo \
-- 
2.34.1

